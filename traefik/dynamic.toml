[http]
[http.middlewares]
[http.middlewares.my-cache.plugin.cache]
path = "/root/traefik_cache"
[http.routers]
[http.routers.to-traefik]
rule = "Host(`traefik.sawyer.services`)"
service = "api@internal"
[http.routers.to-searxng]
rule = "Host(`searxng.sawyer.services`) || Host(`search.sawyer.services`)"
service = "searxng"
[http.routers.to-plex]
rule = "Host(`plex.sawyer.services`)"
service = "plex"
[http.routers.to-torrent]
rule = "Host(`transmission.sawyer.services`) || Host(`torrent.sawyer.services`)"
service = "torrent"
[http.routers.to-portainer]
rule = "Host(`portainer.sawyer.services`)"
service = "portainer"
[http.routers.to-adguard]
rule = "Host(`adguard.sawyer.services`)"
service = "adguard"
[http.routers.to-filebrowser]
rule = "Host(`filebrowser.sawyer.services`) || Host(`files.sawyer.services`)"
service = "filebrowser"
[http.routers.to-grafana]
rule = "Host(`grafana.sawyer.services`)"
service = "grafana"
[http.routers.to-homarr]
rule = "Host(`homarr.sawyer.services`) || Host(`dashy.sawyer.services`) || Host(`dashboard.sawyer.services`)"
service = "homarr"
[http.routers.to-calibre]
rule = "Host(`calibre.sawyer.services`) || Host(`calibre-web.sawyer.services`)"
service = "calibre"
[http.routers.to-dash]
rule = "Host(`dash.sawyer.services`)"
service = "dash"
[http.routers.to-registry]
rule = "Host(`registry.sawyer.services`)"
service = "registry"
[http.routers.to-github]
rule = "Host(`github.sawyer.services`) || Host(`gh.sawyer.services`)"
service = "github"

[http.services]
[http.services.searxng.loadBalancer]
[[http.services.searxng.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:9001"
[http.services.plex.loadBalancer]
[[http.services.plex.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:32400"
[http.services.torrent.loadBalancer]
[[http.services.torrent.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:9092"
[http.services.portainer.loadBalancer]
[[http.services.portainer.loadBalancer.servers]]
# portainer only runs on https - so redirect
url = "https://homelab.dunker-arctic.ts.net:9443"
[http.services.adguard.loadBalancer]
[[http.services.adguard.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:2001"
[http.services.filebrowser.loadBalancer]
[[http.services.filebrowser.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:9003"
[http.services.grafana.loadBalancer]
[[http.services.grafana.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:9006"
[http.services.homarr.loadBalancer]
[[http.services.homarr.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:7575"
[http.services.calibre.loadBalancer]
[[http.services.calibre.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:8083"
[http.services.dash.loadBalancer]
[[http.services.dash.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:9007"
[http.services.registry.loadBalancer]
[[http.services.registry.loadBalancer.servers]]
url = "http://homelab.dunker-arctic.ts.net:5000"
[http.services.github.loadBalancer]
[[http.services.github.loadBalancer.servers]]
url = "https://github.com/Legitcamper:443"

[https]
[https.middlewares]
[https.middlewares.my-cache.plugin.cache]
path = "/root/traefik_cache"
[https.routers]
[https.routers.to-traefik]
rule = "Host(`traefik.sawyer.services`)"
service = "api@internal"
[https.routers.to-search]
rule = "Host(`searxng.sawyer.services`) || Host(`search.sawyer.services`)"
service = "searxng"
[https.routers.to-plex]
rule = "Host(`plex.sawyer.services`)"
service = "plex"
[https.routers.to-torrent]
rule = "Host(`transmission.sawyer.services`) || Host(`torrent.sawyer.services`)"
service = "torrent"
[https.routers.to-portainer]
rule = "Host(`portainer.sawyer.services`)"
service = "portainer"
[https.routers.to-adguard]
rule = "Host(`adguard.sawyer.services`)"
service = "adguard"
[https.routers.to-filebrowser]
rule = "Host(`filebrowser.sawyer.services`) || Host(`files.sawyer.services`)"
service = "filebrowser"
[https.routers.to-grafana]
rule = "Host(`grafana.sawyer.services`)"
service = "grafana"
[https.routers.to-homarr]
rule = "Host(`homarr.sawyer.services`) || Host(`dashy.sawyer.services`) || Host(`dashboard.sawyer.services`)"
service = "homarr"
[https.routers.to-calibre]
rule = "Host(`calibre.sawyer.services`) || Host(`calibre-web.sawyer.services`)"
service = "calibre"
[https.routers.to-dash]
rule = "Host(`dash.sawyer.services`)"
service = "dash"
[https.routers.to-registry]
rule = "Host(`registry.sawyer.services`)"
service = "registry"
[https.routers.to-github]
rule = "Host(`gh.sawyer.services`)"
service = "github"

[https.services]
[https.services.searxng.loadBalancer]
[[https.services.searxng.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:9001"
[https.services.plex.loadBalancer]
[[https.services.plex.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:32400"
[https.services.torrent.loadBalancer]
[[https.services.torrent.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:9092"
[https.services.portainer.loadBalancer]
[[https.services.portainer.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:9443"
[https.services.adguard.loadBalancer]
[[https.services.adguard.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:2001"
[https.services.filebrowser.loadBalancer]
[[https.services.filebrowser.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:9003"
[https.services.grafana.loadBalancer]
[[https.services.grafana.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:9006"
[https.services.homarr.loadBalancer]
[[https.services.homarr.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:7575"
[https.services.calibre.loadBalancer]
[[https.services.calibre.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:8083"
[https.services.dash.loadBalancer]
[[https.services.dash.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:9007"
[https.services.registry.loadBalancer]
[[https.services.registry.loadBalancer.servers]]
url = "https://homelab.dunker-arctic.ts.net:5000"
[https.services.github.loadBalancer]
[[https.services.github.loadBalancer.servers]]
url = "https://github.com/Legitcamper"

[tcp]
[tcp.routers]
[tcp.routers.to-minecraft]
entryPoints = ["minecraft-tcp"]
rule = "HostSNI(`minecraft.sawyer.services`) || HostSNI(`mc.sawyer.services`)"
service = "minecraft"
[tcp.routers.to-minecraft.tls]
passthrough = true
[tcp.routers.to-dns]
entryPoints = ["dns-tcp"]
rule = "HostSNI(`dns.sawyer.services`)"
service = "dns"

[tcp.services]
[tcp.services.minecraft.loadBalancer]
[[tcp.services.minecraft.loadBalancer.servers]]
address = "MYHOMELABIP:25565"
[tcp.services.dns.loadBalancer]
[[tcp.services.dns.loadBalancer.servers]]
address = "MYHOMELABIP:53"

[udp]
[udp.routers]
[udp.routers.to-minecraft]
entryPoints = ["minecraft-udp"]
service = "minecraft"
[udp.routers.to-dns]
entryPoints = ["dns-udp"]
service = "dns"

[udp.services]
[udp.services.minecraft.loadBalancer]
[[udp.services.minecraft.loadBalancer.servers]]
address = "MYHOMELABIP:25565"
[udp.services.dns.loadBalancer]
[[udp.services.dns.loadBalancer.servers]]
address = "MYHOMELABIP:53"
